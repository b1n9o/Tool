# 文件重命名脚本

## 📝 脚本简介
这是一个基于`exiftool`的文件批量重命名工具。脚本会读取每个文件的`Creation Date`元数据，并按照`IMG_YYYYMMDD_HHMMSS`的格式重命名文件，有效解决不同设备拍摄的视频文件命名混乱问题。

## 🛠️ 依赖要求

### 必需工具
- **exiftool**: 用于读取文件的元数据信息
  ```bash
  # macOS安装方法（使用Homebrew）
  brew install exiftool
  
  # 验证安装
  exiftool -ver
  ```

### 系统要求
- macOS（已在macOS系统测试）
- Bash shell环境

## 🚀 使用方法

### 使用示例
```bash
# 重命名绝对路径目录中的文件
./rename_mov.sh /Users/username/files
```

## ✨ 功能特点

### 1. 智能时间提取
- **仅使用`Creation Date`字段**：严格只读取文件的原始创建时间
- **自动时区处理**：忽略时区信息（如`+08:00`），仅使用基础时间
- **格式验证**：严格验证时间格式的有效性

### 2. 文件重命名规则
- **标准格式**：`IMG_YYYYMMDD_HHMMSS`
  - 示例：`IMG_20220405_142021`
- **冲突处理**：当目标文件名已存在时，自动添加序号后缀
  - 示例：`IMG_20220405_142021_2`

### 3. 错误处理与日志
- **缺失元数据检测**：当文件缺少`Creation Date`字段时跳过并记录
- **格式错误处理**：无效时间格式的文件会被跳过
- **详细日志**：每个文件的处理状态都有明确反馈

## 📊 输出示例

```
处理目录: /Users/username/files
基于Creation Date重命名MOV文件...
注意：仅使用 'Creation Date' 字段
========================================
处理文件 (1): DSC_001.mov
  Creation Date: 2022:04:05 14:20:21+08:00
  ✅ 重命名为: IMG_20220405_142021.mov

处理文件 (2): video2.MOV
  Creation Date: 2022:04:05 14:20:21+08:00
  ⚠️  注意: 文件 IMG_20220405_142021.mov 已存在，添加序号...
  新文件名: IMG_20220405_142021_2.mov
  ✅ 重命名为: IMG_20220405_142021_2.mov

处理文件 (3): old_video.mov
  ❌ 错误: 无法获取 'Creation Date' 字段，跳过此文件

========================================
处理完成！
目录: /Users/username/files
找到文件: 3 个
成功重命名: 2 个文件
跳过（已符合格式）: 0 个文件
失败（无Creation Date）: 1 个文件
其他失败: 0 个文件
总计处理: 3 个文件
```

## ⚠️ 注意事项

1. **文件备份建议**：首次使用前建议先备份原始文件
2. **权限要求**：确保对目标目录有读写权限
3. **文件名限制**：脚本不会覆盖已存在的文件
4. **格式限制**：仅支持`.mov`和`.img`格式文件
5. **时间源**：完全依赖文件的`Creation Date`元数据，如果该字段缺失或错误，文件将被跳过
